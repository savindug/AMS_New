<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
<title></title>
<!--===============================================================================================-->
<link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/iconic/css/material-design-iconic-font.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
<!--===============================================================================================-->
<link rel="stylesheet" href="css/signup.css">
<!-- <link rel="import" href="header.html"> -->
</head>
<body>
<div class="signup-form my-5">
    <form id="form-content-signup">
		<h2>Sign Up</h2>
		<p>Please fill in this form to create an account!</p>
		<hr>
        <div class="form-group">
			<div class="input-group">
				<span class="input-group-addon"><i class="fa fa-user"></i></span>
				<input id="username" type="text" class="form-control" name="username" placeholder="Username" required="required">
			</div>
        </div>
        <div class="form-group">
			<div class="input-group">
				<span class="input-group-addon"><i class="fa fa-paper-plane"></i></span>
				<label>
					Select Branch
					<select id="email" name="email">
						<option value="Choose">Choose</option>
						<option value="Head_Office">Head_Office</option>
						<option value="District_Office_Galle">District_Office_Galle</option>
						<option value="Ahangama">Ahangama</option>
						<option value="Ahungalla">Ahungalla</option>
						<option value="Aluthwala">Aluthwala</option>
						<option value="Ambalangoda">Ambalangoda</option>
						<option value="Ambana">Ambana</option>
						<option value="Baddegama">Baddegama</option>
						<option value="Batapola">Batapola</option>
						<option value="Elpitiya">Elpitiya</option>
						<option value="Ethkandura">Ethkandura</option>
						<option value="Gonadeniya_Udugama">Gonadeniya_Udugama</option>
						<option value="Gongala_Gonagalapura">Gongala_Gonagalapura</option>
						<option value="Karandeniya">Karandeniya</option>
						<option value="Keradewala">Keradewala</option>
						<option value="Kodagoda_Imaduwa">Kodagoda_Imaduwa</option>
						<option value="Koggala">Koggala</option>
						<option value="Labuduwa">Labuduwa</option>
						<option value="Nagoda_Ethumale">Nagoda_Ethumale</option>
						<option value="Neluwa">Neluwa</option>
						<option value="Niyagama">Niyagama</option>
						<option value="Opatha">Opatha</option>
						<option value="Pahalagamhaya_Miriswaththa_Benthota">Pahalagamhaya_Miriswaththa_Benthota</option>
						<option value="Paragoda_Imaduwa">Paragoda_Imaduwa</option>
						<option value="Pilana">Pilana</option>
						<option value="Pinkanda">Pinkanda</option>
						<option value="Pitigala">Pitigala</option>
						<option value="Rathgama">Rathgama</option>
						<option value="Thawalama">Thawalama</option>
						<option value="Urala_Wanduramba">Urala_Wanduramba</option>
						<option value="Urugasmanhandiya">Urugasmanhandiya</option>
						<option value="Walahanduwa">Walahanduwa</option>
						<option value="Wanduramba">Wanduramba</option>
						<option value="Weragoda">Weragoda</option>
						<option value="Yakkalamulla">Yakkalamulla</option>

					</select>
				</label>
			</div>
        </div>
		<div class="form-group">
			<div class="input-group">
				<span class="input-group-addon"><i class="fa fa-lock"></i></span>
				<input id="pass" type="password" class="form-control" name="password" placeholder="Password" required="required">
			</div>
        </div>
		<div class="form-group">
			<div class="input-group">
				<span class="input-group-addon">
					<i class="fa fa-lock"></i>
					<i class="fa fa-check"></i>
				</span>
				<input id="c_pass" type="password" class="form-control" name="confirm_password" placeholder="Confirm Password" required="required">
			</div>
        </div>
        <div class="form-group">
			</div>
		<div class="form-group">
            <button type="submit" class="btn btn-primary btn-lg">Sign Up</button>
        </div>
    </form>
	<div class="text-center text-dark">Already have an account? <a class="text-primary" href="./index.html">Login here</a></div>
</div>

<script>

    window.addEventListener('load', (event) => {
        console.log("width: "+window.innerWidth+" height: "+window.innerHeight)
    })

        const render = require('./js/render.js');

        document.querySelector("#form-content-signup").addEventListener('submit', (event) => {
        event.preventDefault();
        console.log("btn-signup submitted!")

        var username = document.getElementById("username").value;
        var email = document.getElementById("email").value;
        var pass = document.getElementById("pass").value;
        var c_pass = document.getElementById("c_pass").value;

        // var username = "Nuwanga";
        // var email = "nuwanga.me@qss.lk";
        // var pass = "09876";
        // var c_pass = "09876";

        var validation = validateUser(username, email, pass, c_pass)

        if(validation == null){

            let user = new render.Users(username, email, pass, c_pass);

            user.displayUser();
            user.saveUser();
        }else{
            alert(validation)
            location.reload()
        }


        function validateUser(username, email, pass, c_pass) {

            var erroMsg = null;
            var vEmail
            var vPwd

            if( (this.username != null) && (this.email != null) && (this.pass != null) && (this.c_pass != null) ){

                vEmail = validateEmail(email)

                console.log("vEmail: "+vEmail)

                if(  vEmail == true ){
                   vEmail = true
                }else{
                    vEmail = false
                    email = "Please Enter a Valid email!"
                    erroMsg = "Please Enter a Valid email! "
                }

                vPwd = confirmPwd(pass, c_pass)
                console.log("vPwd: "+vPwd)

                if( vPwd == true ){
                    vPwd = true
                }else{
                    vPwd = false
                    pass = "Password Confirmation Failed! "
                    c_pass = "Password Confirmation Failed! "
                    erroMsg = "Password Confirmation Failed! "
                }

                return erroMsg;

        }else{
            erroMsg = "Please fill the form!"
            return erroMsg;
        }
    }

    function validateEmail (email)  {

        return true;
    }

    function confirmPwd (pwd, c_pwd)  {

        if(pwd == c_pwd){
                    return true
        }else{

                return false
            }
    }

    })

    </script>

</body>
</html>